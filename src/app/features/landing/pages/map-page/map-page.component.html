<div class="map-page">
    <div
        [class]="switchClasses"
        *ngIf="isProjectionToogleVisible">
        <app-switch
            [label]="{
                right: 'Globe',
            }"
            [color]="switchColor"
            [checked]="isGlobe"
            (change)="onSwitchChange($event)" />
    </div>
    @if (projection === "globe") {
        <app-globe-map
            (markerClick)="onMarkerClick($event)"
            (zoomEnd)="onZoomEnd($event)" />
    } @else {
        <app-mercator-map
            (markerClick)="onMarkerClick($event)"
            (zoomEnd)="onZoomEnd($event)" />
    }
    @if (isMobile()) {
        <div class="map-page__top-container--mobile">
            <ng-container *ngTemplateOutlet="topContainer"></ng-container>
        </div>
    } @else {
        <ng-container *ngTemplateOutlet="topContainer"></ng-container>
    }
</div>

<ng-template #topContainer>
    <div class="map-page__filter">
        <app-category-filter-menu
            class="category-filter-menu"
            (selectedCategory)="onSelectedCategory($event)" />
        <ng-container *ngIf="selectedCategory$ | async as selectedCategory">
            <app-category-filter-selection
                [category]="selectedCategory"
                (cancelSelection)="onSelectedCategory(null)" />
        </ng-container>
    </div>
    @if (infoTooltipVisible()) {
        <div class="map-page__info">
            <app-map-info-tooltip (closed)="hideInfoTooltip()" />
        </div>
    }
</ng-template>
