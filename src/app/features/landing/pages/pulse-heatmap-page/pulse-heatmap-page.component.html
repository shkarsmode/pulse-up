<div
    *ngIf="pulse"
    class="pulse"
    fadeIn
    [childrenFadeIn]="true">
    <header class="pulse-header">
        <div class="pulse-header__topic">
            <img
                class="pulse-header__logo"
                [src]="pulse.icon"
                width="40"
                height="40"
                alt="pulse icon"
                appLoadImgPath />
            <div class="pulse-header__title">
                <h2>{{ pulse.title }}</h2>
                <div>
                    {{ pulse.author.name }}
                </div>
                <div class="pulse-header__last-votes">
                    {{ pulse.stats?.lastDayVotes || 0 | formatNumber }}
                    Pulses received in last 24 hours
                </div>
            </div>
        </div>
        <button
            mat-icon-button
            class="pulse-header__close"
            (click)="onClose()">
            <svg-icon src="assets/svg/close.svg" />
            <span class="visualy-hidden">Close</span>
        </button>
    </header>

    <main class="pulse">
        <app-map
            class="pulse__map"
            [center]="mapCenterCoordinates()"
            [zoom]="zoom"
            [minZoom]="minZoom"
            [maxBounds]="maxBounds"
            [weights]="{ enabled: true }"
            (mapLoaded)="onMapLoaded($event)">
            <ng-container *ngIf="map">
                <app-map-heatmap-layer
                    [map]="map"
                    [topicId]="pulse.id" />
            </ng-container>
        </app-map>
    </main>
</div>
