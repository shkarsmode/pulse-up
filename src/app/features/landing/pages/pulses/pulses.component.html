<div class="wrap">
    <h1>Trending Topics</h1>

    <div class="row">
        <div class="col">
            <div class="top-row">
                <app-input-search
                    [isLoading]="(loading$ | async) || false"
                    (handleValueChange)="onSearchValueChange($event)" />

                <a
                    *ngIf="!(isAuthenticated$ | async)"
                    [routerLink]="signInRoute"
                    class="add-topic-button">
                    <svg-icon
                        src="assets/svg/add.svg"
                        style="height: 22px" />
                </a>
                <button
                    *ngIf="(isAuthenticated$ | async) && !(isProfileComplete$ | async)"
                    openCompleteProfilePopup
                    class="add-topic-button">
                    <svg-icon
                        src="assets/svg/add.svg"
                        style="height: 22px" />
                </button>
                <a
                    *ngIf="(isAuthenticated$ | async) && (isProfileComplete$ | async)"
                    [routerLink]="addTopicRoute"
                    class="add-topic-button">
                    <svg-icon
                        src="assets/svg/add.svg"
                        style="height: 22px" />
                </a>
            </div>

            <div
                class="wrap__large-pulses"
                *ngIf="paginator$ | async as paginator"
                infiniteScroll
                [infiniteScrollDistance]="2"
                [infiniteScrollThrottle]="150"
                (scrolled)="loadMore(paginator)">
                @for (topic of paginator.items; track topic.id) {
                <app-large-pulse [pulse]="topic" />
                }
                <p
                    class="wrap__loading"
                    *ngIf="loading$ | async">
                    <app-loading-indicator />
                </p>
            </div>
        </div>
        <app-promote-ads />
    </div>
</div>
