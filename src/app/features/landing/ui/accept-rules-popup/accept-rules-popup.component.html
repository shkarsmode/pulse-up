<app-popup class="popup">
    <app-popup-close-button (close)="onClose()" />
    @if (isLoading()) {
        <div class="popup__loading">
            <app-popup-text> Finding your current position... </app-popup-text>
            <app-spinner></app-spinner>
        </div>
    } @else if (isError()) {
        <app-popup-title>Location not Accessible</app-popup-title>
        <div class="popup-error">
            <app-popup-text>
                We couldn‚Äôt determine your device‚Äôs location or the accuracy is too low ‚Äî a valid
                location is required to send a pulse for this topic
            </app-popup-text>
            <app-popup-text>
                If your browser is unable to grant location, you can use the PulseUp mobile app
            </app-popup-text>
            <app-popup-footer>
                <div class="popup-footer">
                    <app-primary-button
                        [fullWidth]="true"
                        size="large"
                        class="popup-footer__retry"
                        (handleClick)="retry()">
                        Retry
                    </app-primary-button>
                    <app-get-app-button
                        [design]="'new'"
                        [isOnePlatform]="true" />
                </div>
            </app-popup-footer>
        </div>
    } @else {
        <app-popup-title>üìçLet's Locate Your Pulse</app-popup-title>
        <app-popup-text textAlign="center">
            To place your pulse on the map we need access to your location
        </app-popup-text>
        <app-popup-text textAlign="center"> Your exact location is never shared </app-popup-text>
        <app-popup-footer>
            <app-primary-button (click)="onAccept()">Grant Location Access</app-primary-button>
        </app-popup-footer>
    }
</app-popup>
