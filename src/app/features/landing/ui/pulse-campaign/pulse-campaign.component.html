<div class="pulse__campaign campaign" [class.campaign--no-click]="!campaign">
    @switch (campaignState) {
        @case (CampaignState.NO_GOAL) {
            <div class="campaign__no-goal">
                <svg class="campaign__no-goal-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
                    <circle cx="12" cy="12" r="6" fill="currentColor"/>
                    <circle cx="12" cy="12" r="3" fill="white"/>
                </svg>
                <div class="campaign__no-goal-title">
                    No Active Goal
                    <svg class="campaign__info-icon" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M8 7v4M8 5h.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                </div>
                <p class="campaign__no-goal-description">
                    Champions can set goals with pledges to motivate supporters and amplify this cause.
                </p>
                <button class="campaign__propose-button" (click)="onProposeGoalClick($event)">
                    <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8 3.5V12.5M3.5 8H12.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Propose a Goal
                </button>
            </div>
        }
        @case (CampaignState.ACTIVE) {
            <div class="campaign__title">ðŸŽ¯ Goal: {{ currentGoalReward }}</div>
            <div class="campaign__progress">
                <div class="campaign__progress-title">Progress</div>
                <div class="campaign__progress-bar">
                    <div
                        [style.width.%]="currentGoalInPercent"
                        class="campaign__progress-bar--line"
                        style="--fill-width: {{ currentGoalInPercent }}%"
                        [class.campaign__progress-bar--not-fulled]="
                            currentGoalInPercent < 100
                        "></div>
                </div>
                <div class="campaign__progress-count">
                    {{ currentGoal }}
                </div>
            </div>
        }
        @case (CampaignState.NOT_STARTED) {
            <div class="campaign__title campaign__title--info">
                {{ campaign?.description }}
            </div>
            <div class="campaign__goal">Current Goal: Get {{ currentGoal }}</div>
        }
        @case (CampaignState.COMPLETED_SUCCESS) {
            <div class="campaign__title campaign__title--info">
                {{ campaign?.description }}
            </div>
            <div class="campaign__title campaign__title--success">
                Campaign Successfully Completed
            </div>
        }
        @case (CampaignState.COMPLETED_FAIL) {
            <div class="campaign__title campaign__title--info">
                {{ campaign?.description }}
            </div>
            <div class="campaign__title campaign__title--fail">Campaign Closed</div>
        }
    }
    @if (campaign) {
        <a
            class="campaign__sponsored"
            [href]="campaign.sponsorLink"
            target="_blank"
            (click)="$event.stopPropagation()">
            Sponsored by
            @if (campaign.sponsorLogo) {
                <img
                    width="100"
                    height="30"
                    [src]="campaign.sponsorLogo"
                    alt="sponsor logo" />
            } @else {
                <span>
                    {{ campaign.sponsoredBy }}
                </span>
            }
        </a>
    }
</div>
