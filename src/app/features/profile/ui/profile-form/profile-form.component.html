<form
    [formGroup]="form"
    class="profile-form">
    <div class="profile-form__field">
        <app-picture-picker
            id="profilePicture"
            name="profilePicture"
            label="Profile picture"
            [previewUrl]="(previewUrl$ | async) || ''"
            [picture]="profilePicture"
            (pictureSelected)="onSelectPicture($event)"
            (pictureDeleted)="onDeletePicture()" />
        <div *ngIf="getErrorMessage('profilePicture') as error">
            <span class="profile-form__error">{{ error }}</span>
        </div>
    </div>
    <div class="profile-form__field">
        <app-input
            type="text"
            id="name"
            name="name"
            label="Name"
            autocomplete="name"
            placeholder="Enter your name or organization"
            formControlName="name"
            [hasErrorClass]="!!(form.get('name')?.touched && form.get('name')?.invalid)"
            (emitBlur)="onBlur('name')" />
        <div *ngIf="getErrorMessage('name') as error">
            <span class="profile-form__error">{{ error }}</span>
        </div>
    </div>
    <div class="profile-form__field">
        <app-input
            type="text"
            id="username"
            name="username"
            label="Username"
            placeholder="Enter a unique username"
            formControlName="username"
            autocomplete="off"
            [hasErrorClass]="!!(form.get('username')?.touched && form.get('username')?.invalid)"
            (emitBlur)="onBlur('username')" />
        <div *ngIf="getErrorMessage('username') as error">
            <span class="profile-form__error">{{ error }}</span>
        </div>
    </div>
    <div class="profile-form__field">
        <span class="profile-form__label">Email</span>
        <a
            [routerLink]="chngeEmailRoute"
            [ngClass]="classes.email">
            {{ email }}
        </a>
    </div>
    <div class="profile-form__field">
        <span class="profile-form__label">Phone number</span>
        <a
            [routerLink]="chngePhoneNumberRoute"
            class="profile-form__link">
            {{ phoneNumber }}
        </a>
    </div>
    <div class="profile-form__field profile-form__field--textarea">
        <app-textarea
            id="bio"
            name="bio"
            label="Bio"
            formControlName="bio"
            [hasErrorClass]="!!(form.get('bio')?.touched && form.get('bio')?.invalid)"
            (emitBlur)="onBlur('bio')" />
        <div *ngIf="getErrorMessage('bio') as error">
            <span class="profile-form__error">{{ error }}</span>
        </div>
    </div>
    <div class="footer">
        <app-primary-button
            type="submit"
            [fullWidth]="true"
            [disabled]="isDisabled()"
            [loading]="submitting"
            (handleClick)="onSubmit($event)">
            Save
        </app-primary-button>
        <app-secondary-button
            [fullWidth]="true"
            (handleClick)="onCancel()">
            Cancel
        </app-secondary-button>
    </div>
</form>
